# Raincity

Raincity is a local development tool that simulates AWS services so you can build and test integrations without touching real AWS infrastructure.

## What It Simulates

- S3 (not yet implemented)

## Repository Layout

This repository is a pnpm monorepo:

```text
apps/
  runner/         # @raincity/runner - single process runner for all services.
packages/
  s3/             # @raincity/s3 - local S3 simulator
```

## Getting Started

1. Install dependencies:

```bash
pnpm install
```

## Commit Hooks

This repo uses Husky to run checks before commit.

- `pre-commit` runs:
  - `pnpm biome:fix:staged`
  - `pnpm lint-staged` (runs oxlint on staged lintable files)
  - `pnpm rulesync generate --check`
  - `pnpm syncpack:lint`
  - `pnpm typecheck`
- If any check fails, the commit is blocked.

If hooks are missing locally, run:

```bash
pnpm run prepare
```

## Common Commands

- Typecheck all packages:

```bash
pnpm typecheck
```

- Format and organize imports across the repo (Biome):

```bash
pnpm format
```

- Run linter across the repo (Oxlint):

```bash
pnpm lint
```

- Auto-fix dependency ranges to policy:

```bash
pnpm syncpack:fix
```

## Contributor Notes

### Dependency Version Policy

- Enforced by syncpack.
- External dependencies in `dependencies`, `devDependencies`, and `peerDependencies` should use caret ranges (`^`).
- Internal workspace dependencies should remain `workspace:*`.

### Linting and Formatting

- `oxlint` is the linter for JavaScript/TypeScript and supported frontend file types.
- `biome` is used for formatting and import organization only (not linting).

### AI Tooling

Some instruction files are generated by rulesync and should not be edited directly:

- `AGENTS.md`
- `CLAUDE.md`
- `.claude/` (except `settings.local.json`)
- `.github/`

To update those generated instruction files:

1. Edit markdown/config files in `.rulesync`
2. Run:

```bash
pnpm rulesync
```
